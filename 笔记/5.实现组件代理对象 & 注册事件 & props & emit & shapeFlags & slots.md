#	组件代理对象

把组件实例上面的 proxy 对象作为 render 的 this，这样在 render 函数中就可以通过 .key 获取 setupState( setup 函数的返回值对象或 $el 或 props )。

![](https://raw.githubusercontent.com/qiulengshuo/images/master/20220603194049.png)

![](https://raw.githubusercontent.com/qiulengshuo/images/master/20220603194408.png)

![image-20220603194433184](C:\Users\HP\AppData\Roaming\Typora\typora-user-images\image-20220603194433184.png)

#	shapeFlags

通过在 vnode 对象上添加 shapeFlag，告知当前 vnode 属于 element / component、children 属于 text_children / array_children。

![](https://raw.githubusercontent.com/qiulengshuo/images/master/20220603194737.png)

#	注册事件

在 h 函数的第二个参数对象中可以添加事件绑定( on 开头)，然后从 vnode 对象上的 prop获取，并给 el 绑定事件。

![](https://raw.githubusercontent.com/qiulengshuo/images/master/20220603195804.png)

#	组件 props

通过传递组件 props ( 事件 / 数据 )，然后setup函数参数拿到 props。

![](https://raw.githubusercontent.com/qiulengshuo/images/master/20220603200623.png)

#	组件 emit

通过在组件内部 setup 函数参数里面传入 emit，就可以调用组件实例 props 里的事件。

![](https://raw.githubusercontent.com/qiulengshuo/images/master/20220603201627.png)

![](https://raw.githubusercontent.com/qiulengshuo/images/master/20220603202047.png)